<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <title>Audio Hub Control</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 0; background:#0b0f14; color:#e6edf3; }
    header { padding:16px; background:#111827; border-bottom:1px solid #1f2937; position:sticky; top:0; }
    main { padding: 16px; display:grid; gap:16px; grid-template-columns: repeat(12, 1fr); }
    .card { background:#0f172a; border:1px solid #1f2937; border-radius:16px; padding:16px; box-shadow: 0 10px 20px rgb(0 0 0 / 0.2); }
    .row { display:flex; gap:8px; flex-wrap: wrap; align-items:center; }
    input, select, button { background:#111827; color:#e6edf3; border:1px solid #374151; border-radius:10px; padding:8px 10px; }
    input:focus, select:focus { outline:2px solid #2563eb; border-color:#2563eb; }
    button { cursor: pointer; }
    button.primary { background:#2563eb; border-color:#2563eb; }
    button.warn { background:#7c2d12; border-color:#7c2d12; }
    .muted { color:#9ca3af; }
    .grid-6 { grid-column: span 6; }
    .grid-4 { grid-column: span 4; }
    .grid-3 { grid-column: span 3; }
    .grid-8 { grid-column: span 8; }
    .grid-12 { grid-column: span 12; }
    @media (max-width: 900px) {
      .grid-6, .grid-4, .grid-3, .grid-8 { grid-column: span 12; }
      main { grid-template-columns: repeat(1, 1fr); }
    }
    textarea { width:100%; min-height:120px; background:#111827; color:#e6edf3; border:1px solid #374151; border-radius:10px; padding:8px 10px; }
    table { width:100%; border-collapse: collapse; }
    td, th { padding:8px; border-bottom: 1px solid #1f2937; }
    code { background:#111827; padding:2px 4px; border-radius:6px; }
    .ok { color:#22c55e; }
    .err { color:#ef4444; }
  </style>
</head>
<body>
  <header>
    <div class="row">
      <strong>Audio Hub Control</strong>
      <span class="muted">· UI minimale</span>
    </div>
  </header>

  <main>
    <section class="card grid-12">
      <h3>Connessione</h3>
      <div class="row">
        <label>Worker Base URL</label>
        <input id="baseUrl" size="50" />
        <label>User</label>
        <input id="user" size="10" />
        <label>Pass</label>
        <input id="pass" type="password" size="16" />
        <label>Device</label>
        <input id="device" size="16" />
        <button class="primary" id="saveConn">Salva</button>
        <span id="connStatus" class="muted"></span>
      </div>
    </section>

    <section class="card grid-6">
      <h3>Player</h3>
      <div class="row">
        <button id="btnPlay" class="primary">Play</button>
        <button id="btnPause">Pause</button>
        <button id="btnStop">Stop</button>
        <button id="btnPrev">Prev</button>
        <button id="btnNext">Next</button>
        <button id="btnClear" class="warn">Clear</button>
      </div>
      <div class="row" style="margin-top:8px">
        <label>Volume</label>
        <input type="number" id="volAbs" min="0" max="200" value="75" style="width:80px" />
        <button id="btnVolAbs">Imposta</button>
        <button id="btnVolDown">-10</button>
        <button id="btnVolUp">+10</button>
      </div>
      <div class="row" style="margin-top:8px">
        <label>Seek (s)</label>
        <input type="number" id="seekAbs" min="0" max="9999" value="60" style="width:80px" />
        <button id="btnSeekAbs">Vai</button>
        <button id="btnSeekBack">-15s</button>
        <button id="btnSeekFwd">+15s</button>
      </div>
      <div class="muted" id="nowPlaying" style="margin-top:10px">now playing…</div>
    </section>

    <section class="card grid-6">
      <h3>Playlist</h3>
      <div class="row">
        <label>Nome</label>
        <input id="plName" size="20" value="Demo" />
        <button id="plCreate">Crea</button>
        <button id="plGet">Vedi</button>
        <button id="plSend" class="primary">Invia al device</button>
        <button id="plDelete" class="warn">Elimina</button>
      </div>
      <div style="margin-top:8px">
        <label class="muted">Sostituisci contenuto (una <code>r2_key</code> per riga oppure separata da <code>;</code>)</label>
        <textarea id="plReplaceBox" placeholder="esempio:
2024-10-31-17-08-14.mp4
test/hello.mp3"></textarea>
        <div class="row" style="margin-top:8px">
          <button id="plReplace">Replace (sovrascrive)</button>
        </div>
      </div>
      <div id="plResult" style="margin-top:10px; white-space:pre-wrap"></div>
    </section>

    <section class="card grid-8">
      <h3>Files (R2)</h3>
      <div class="row">
        <label>Prefisso</label>
        <input id="r2Prefix" size="20" placeholder="es: test/" />
        <button id="r2List">Lista</button>
        <span class="muted" id="r2Count"></span>
      </div>
      <table id="r2Table" style="margin-top:8px"></table>
    </section>

    <section class="card grid-4">
      <h3>Upload su R2</h3>
      <div class="row">
        <input type="file" id="upFile" />
      </div>
      <div class="row" style="margin-top:8px">
        <label>Prefix</label>
        <input id="upPrefix" size="16" placeholder="uploads/" />
        <button id="upSend" class="primary">Carica</button>
      </div>
      <div id="upOut" class="muted" style="margin-top:8px"></div>
    </section>

    <section class="card grid-12">
      <small class="muted">Suggerimento: le credenziali sono salvate in <code>localStorage</code> del browser. Cambiale quando vuoi.</small>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
